<template>
  <div>
    <!-- è·¯ç”±é¡µé¢ä¹‹é—´çš„è¿‡æ¸¡åŠ¨æ•ˆ -->
    <transition :name="transitionName">
      <!-- âš¡æŒ‡å®šç»„ä»¶çš„å‘ˆç°ä½ç½® -->
      <!-- æ­¤å¤„æ‰€å‘ˆç°çš„æ˜¯é¡µé¢åº•éƒ¨æ ‡ç­¾æ çš„æŸä¸€é¡¹æ ‡ç­¾åœ¨è¢«ç‚¹å‡»åè¦è·³è½¬çš„â€œè·¯ç”±é¡µé¢â€ -->
      <router-view class="Router"></router-view>
    </transition>
    <cube-tab-bar
      v-model="selectedLabelDefault"
      :data="tabs"
      @click="clickHandler"
      @change="changeHandler"
      class="botnav">
    </cube-tab-bar>
    <!-- âš¡è®¾ç½®å°†å•†å“æ·»åŠ è‡³è´­ç‰©è½¦çš„æ•°é‡ç´¯è®¡æ€»æ•° -->
    <span class="countsum">{{countsum}}</span>
  </div>
</template>

<script>
import {mapGetters} from 'vuex'
  export default {
    name:'Botnav',
    data () {
      return {
        transitionName:'slide-right',
        //âš¡é»˜è®¤é€‰æ‹©'é¦–é¡µ'
        selectedLabelDefault: 'é¦–é¡µ',
        tabs: [
          {
            label: 'é¦–é¡µ',
            icon: 'cubeic-home'
          }, 
          {
            label: 'åˆ†ç±»',
            icon: 'cubeic-tag'
          }, 
          {
            label: 'æœç´¢',
            icon: 'cubeic-search'
          }, 
          {
            label: 'è´­ç‰©è½¦',
            icon: 'cubeic-mall'
          },
          {
            label: 'æˆ‘çš„',
            icon: 'cubeic-person'
          }
        ]
      }
    },
    methods: {
      clickHandler (label) {
        // if you clicked home tab, then print 'Home'
        // console.log(label)
      },
      //ç‚¹å‡»ä¸è‡ªèº«ä¸åŒçš„å…¶ä»–å¯¼èˆª
      changeHandler (label) {
        // if you clicked different tab, this methods can be emitted(å¦‚æœä½ é€‰æ‹©äº†ä¸åŒçš„tagï¼Œå°±ä¼šè§¦å‘è¯¥æ–¹æ³•)
        switch (label) {
          case 'é¦–é¡µ':
            //ç‚¹å‡»â€˜é¦–é¡µâ€™æ ‡ç­¾ï¼Œè·³è½¬è‡³/botnav/indexè·¯ç”±é¡µé¢
            //this.$router.push({name:'index'})        //ğŸ“Œå‘½åè·¯ç”±å†™æ³•
            this.$router.push({path:'/botnav/index'})
            break //è·³å‡ºswitchè¯­å¥ä¸­è¯¥caseä»£ç æ®µ
          case 'åˆ†ç±»':
            //ç‚¹å‡»â€˜åˆ†ç±»â€™æ ‡ç­¾ï¼Œè·³è½¬è‡³/botnav/listè·¯ç”±é¡µé¢
            //this.$router.push({name:'list'})        //ğŸ“Œå‘½åè·¯ç”±å†™æ³•
            this.$router.push({path:'/botnav/list'})
            break //è·³å‡ºswitchè¯­å¥ä¸­è¯¥caseä»£ç æ®µ
          case 'æœç´¢':
            //ç‚¹å‡»â€˜æœç´¢â€™æ ‡ç­¾ï¼Œè·³è½¬è‡³/botnav/searchè·¯ç”±é¡µé¢
            //this.$router.push({name:'search'})        //ğŸ“Œå‘½åè·¯ç”±å†™æ³•
            this.$router.push({path:'/botnav/search'})
            break //è·³å‡ºswitchè¯­å¥ä¸­è¯¥caseä»£ç æ®µ
          case 'è´­ç‰©è½¦':
            //ç‚¹å‡»â€˜è´­ç‰©è½¦â€™æ ‡ç­¾ï¼Œè·³è½¬è‡³/botnav/cartè·¯ç”±é¡µé¢
            //this.$router.push({name:'cart'})        //ğŸ“Œå‘½åè·¯ç”±å†™æ³•
            this.$router.push({path:'/botnav/cart'})
            break //è·³å‡ºswitchè¯­å¥ä¸­è¯¥caseä»£ç æ®µ
          case 'æˆ‘çš„':
            //ç‚¹å‡»â€˜æˆ‘çš„â€™æ ‡ç­¾ï¼Œè·³è½¬è‡³/botnav/mineè·¯ç”±é¡µé¢
            //this.$router.push({name:'mine'})        //ğŸ“Œå‘½åè·¯ç”±å†™æ³•
            this.$router.push({path:'/botnav/mine'})
            break //è·³å‡ºswitchè¯­å¥ä¸­è¯¥caseä»£ç æ®µ
             
          
        }
      }
    },

    computed: {
      //å€ŸåŠ©mapGettersç”Ÿæˆè®¡ç®—å±æ€§ï¼Œä»gettersä¸­æ‹¿åˆ°æ•°æ® (æ•°ç»„å†™æ³•)
      ...mapGetters(['countsum'])
    },

    //createdé’©å­->åœ¨é¡µé¢åˆå§‹åŒ–&æ³¨å…¥å“åº”å¼ä¹‹åï¼Œæ­¤æ—¶å·²ç»å¯ä»¥è®¿é—®åˆ°dataä¸­çš„æ•°æ®å’Œmethodsä¸­çš„æ–¹æ³•äº†
    //â—â—å½“ç„¶ï¼Œè¿™é‡Œå¦‚æœæŠŠcreatedæ¢æˆmounted(é¡µé¢æŒ‚è½½å®Œæˆ)ä¹Ÿå¯ä»¥å®ç°ä¸‹é¢çš„åŠŸèƒ½
    created() {
      //console.log(this)  âš¡ä½ å¯ä»¥é€šè¿‡è¿™å¥è¾“å‡ºè¯­å¥æŸ¥çœ‹vcèº«ä¸Šçš„è·¯ç”±ä¿¡æ¯â—
      /* åœ¨é¡µé¢åˆšåˆšå®Œæˆåˆå§‹åŒ–å¹¶æ³¨å…¥å“åº”å¼åï¼Œåˆ©ç”¨å¼€å…³è¯­å¥åˆ¤æ–­å½“å‰æµè§ˆå™¨åœ°å€æ çš„è·¯å¾„ï¼Œå¦‚æœè·¯å¾„ä¸ºä»¥ä¸‹çš„5ä¸ªcaseä¸­çš„ä»»æ„ä¸€ç§ï¼Œåˆ™è®¾ç½®é»˜è®¤é€‰æ‹©çš„â€œåˆ†ç±»é¡µâ€ */
      switch(this.$route.path){
        case '/botnav/index':
          //âš¡é»˜è®¤é€‰æ‹©'é¦–é¡µ'
          this.selectedLabelDefault = 'é¦–é¡µ'
          break
        case '/botnav/list':
          //âš¡é»˜è®¤é€‰æ‹©'åˆ†ç±»'
          this.selectedLabelDefault = 'åˆ†ç±»'
          break
        case '/botnav/search':
          //âš¡é»˜è®¤é€‰æ‹©'æœç´¢'
          this.selectedLabelDefault = 'æœç´¢'
          break
        case '/botnav/cart':
          //âš¡é»˜è®¤é€‰æ‹©'è´­ç‰©è½¦'
          this.selectedLabelDefault = 'è´­ç‰©è½¦'
          break
        case '/botnav/mine':
          //âš¡é»˜è®¤é€‰æ‹©'æˆ‘çš„'
          this.selectedLabelDefault = 'æˆ‘çš„'
          break     
      }
    },
  }
</script>

<style lang="stylus">
  .cube-tab-bar.botnav
    position fixed
    bottom 0
    left 0
    z-index 1000
    width 100%
    background #fff
    .cube-tab div
      font-size 16px
      padding-top 3px
    i
      font-size 20px
  .Router
    position absolute
    width 100%
    transition all 0.8s ease
    
  .slide-left-enter,.slide-right-leave-active
    opacity 0
    transform translate(100%,0)
  .slide-left-leave-active,.slide-right-enter
    opacity 0
    transform translate(-100%,0)
  .countsum
    position fixed
    bottom 33px
    right 23% 
    z-index 1001
    width 18px
    height 18px
    line-height 18px
    border-radius 50%
    font-size 14px
    background red
    color #fff
</style>